var CheckedComparisonPopup;jQuery(function($){CheckedComparisonPopup={popupShown:0,checked:[],switchPopupContent:function(){var self=this,count=self.checked.length,companiesTitles=[];$.each(self.checked,function(i,v){companiesTitles.push(v.title);});$('#cboxContent #ccp-content-holder').text(companiesTitles.join(' vs '));if(count==1){$('#cboxContent #select-one-more').removeClass('hidden');$('#cboxContent #ccp-content-holder').addClass('hidden');$('#cboxContent #ccp-can-add').addClass('hidden');$('#cboxContent .popup-compare-btn').addClass('hidden');}else if(count==2){$('#cboxContent #select-one-more').addClass('hidden');$('#cboxContent #ccp-content-holder').removeClass('hidden');$('#cboxContent #ccp-can-add').removeClass('hidden');$('#cboxContent .popup-compare-btn').removeClass('hidden');}else if(count==3){$('#cboxContent #select-one-more').addClass('hidden');$('#cboxContent #ccp-content-holder').removeClass('hidden');$('#cboxContent #ccp-can-add').addClass('hidden');$('#cboxContent .popup-compare-btn').removeClass('hidden');}
$.colorbox.resize();},initPopup:function(){var self=this;if(self.checked.length){if(!self.popupShown){self.popupShown=1;var popupOptions={fixed:true,trapFocus:false,bottom:20,onOpen:function(){$('#cboxOverlay').addClass('no-display');},onClosed:function(){$('#cboxOverlay').removeClass('no-display');},onComplete:function(){self.switchPopupContent();},onClosed:function(){self.popupShown=0;}};Template.popup('#checked-comparison-popup',[],popupOptions);}else{self.switchPopupContent();}}else{$.colorbox.close();self.popupShown=0;}},refreshCheckboxes:function(reinitCheckboxes){var self=this;reinitCheckboxes=reinitCheckboxes||false;if(reinitCheckboxes){$.each(self.checked,function(i,v){var el=$('[name="company-comparison-check"][value="'+v.slug+'"]'),fa=el.parent().find('.fa');if(!fa.hasClass('fa-check-square')){fa.addClass('fa-check-square');}
if(!el.prop('checked')){el.prop('checked',true);}});}
if(self.checked.length<3){$('[name="company-comparison-check"]').removeAttr('disabled');$('.company-comparison-ctrl.disabled').removeClass('disabled');}else{$('[name="company-comparison-check"]:not(:checked)').each(function(i,v){$(v).attr('disabled',true);$(v).parent('.company-comparison-ctrl').addClass('disabled');});}},init:function(){var self=this;$(document).on('click','.company-comparison-ctrl',function(e){e.preventDefault();if($(this).hasClass('disabled')){return false;}
var $cb=$(this).find('input'),$i=$(this).find('i');if(!$i.hasClass('fa-check-square')){$i.removeClass('fa-square');$i.addClass('fa-check-square');}else{$i.addClass('fa-square');$i.removeClass('fa-check-square');}
$cb.prop('checked',!$cb.prop('checked')).change();});$(document).on('change','[name="company-comparison-check"]',function(){var slug=$(this).val(),title=$(this).attr('data-title');if($(this).prop('checked')){if(self.checked.length<3){self.checked.push({'title':title,'slug':slug});}}else{$.each(self.checked,function(i,v){if(v.slug==slug){self.checked.splice(i,1);return false;}});}
self.refreshCheckboxes();self.initPopup();});$(document).on('click','.popup-compare-btn',function(e){e.preventDefault();var slugs=[];$.each(self.checked,function(i,v){slugs.push(v.slug);});if(slugs.length>1&&slugs.length<=3){window.location.assign(window.location.origin+'/tools/web-hosting-comparison/'+slugs.join('-vs-')+'/');}});}};CheckedComparisonPopup.init();});