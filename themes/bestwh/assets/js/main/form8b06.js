function highlightPlace(element){element=jQuery(element);var mapTo=element.data("map-to");if(mapTo){element=element.closest("form").find('[name="'+mapTo+'"]');}
var places=['.input-group','.date-picker-button'];var errorPlace=null;jQuery.each(places,function(i,e){errorPlace=element.closest(e);if(errorPlace.length>0){return false;}});if(element[0].nodeName==='SELECT'){errorPlace=element.parent().find('span.customSelect');}
if(!errorPlace||errorPlace.length<1){return element;}
return errorPlace;}
var colorboxResizeTimeout=null;Form={update:function(form){var colorbox=form.closest('#colorbox');if(colorbox.length){if(colorboxResizeTimeout!==null){clearTimeout(colorboxResizeTimeout);}
colorboxResizeTimeout=setTimeout(function(){colorbox.colorbox.resize();colorboxResizeTimeout=null;},50);}},highlight:function(element){Form.update(highlightPlace(element).addClass('error').closest('form'));},unhighlight:function(element){Form.update(highlightPlace(element).removeClass('error').closest('form'));},errorRemove:function(error,element){element=highlightPlace(element);Form.update(element.closest('fieldset').find('label.error[id="'+error.attr('id')+'"]').hide().closest('form'));},errorPlacement:function(error,element){element=highlightPlace(element);element=jQuery(element);var fieldset=element.closest('fieldset');var newLabel=error;var oldLabel=fieldset.find('label.error');if(oldLabel.length>0){oldLabel.replaceWith(newLabel);}else{fieldset.append(newLabel);}
Form.update(fieldset.closest('form'));},putErrors:function(form,errors){var self=this;if(errors===undefined){errors={};}
jQuery(form).find('[name]').each(function(){var element=jQuery(this),name=element.attr('name');self.putSingleError(element,errors[name],'name');});},putSingleError:function(element,error,identificator){if(typeof identificator==='undefined'||!identificator.length){identificator='name';}
var name=element.attr(identificator);var label=jQuery('<label>').attr({id:name+"-error",class:"error",for:name});if(error){Form.errorPlacement(label.text(error),element);Form.highlight(element);}else{Form.errorRemove(label,element);Form.unhighlight(element);}},validate:function(form,options){options=jQuery.extend({},options,{success:Form.errorRemove,errorPlacement:Form.errorPlacement,highlight:function(element){Form.highlight(element);if(typeof(options.change)==='function'){options.change(form);}},unhighlight:function(element){Form.unhighlight(element);if(typeof(options.invalid)==='function'){options.change(form);}}});return jQuery(form).validate(options);}};