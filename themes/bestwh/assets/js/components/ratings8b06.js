function showDetailedUserScore($this){var $animatedDiv=$this.closest('div, td').find('.user_review_rating_preview');jQuery($animatedDiv).stop(true).fadeIn(500);}
function hideDetailedUserScore($this){var $animatedDiv=$this.closest('div, td').find('.user_review_rating_preview');jQuery($animatedDiv).stop(true).fadeOut(500);}
jQuery(function($){function scorePercent(e,stars_holder){var width=$(stars_holder).width();var left=e.pageX-$(stars_holder).offset().left;var offset=Math.min(Math.max(0,Page.isRTL()?width-left:left),width);return Math.round((offset/width*100/20)+0.49)*20;}
$(document).on('mousemove','.stars_holder.editable_rating',function(e){var percent=scorePercent(e,this);$(this).find('.full-stars').width(percent+"%");}).on('click','.stars_holder.editable_rating',function(e){e.stopPropagation();var score=Math.round(scorePercent(e,this)*10/100)/10*10;if($(this).next('input[type="hidden"]').length>0){$(this).next('input[type="hidden"]').val(score).change();}
$(this).closest('fieldset').find('#score-compare').val(score);if($(this).closest('#new-user-review').length>0){var count=0;var total=0;$(this).closest('#new-user-review').find('.stars_holder').next('input[type="hidden"]').each(function(){count++;total+=+$(this).val();});$(this).closest('#new-user-review').find('.overall_score .yellow_num').text(total/count);}}).on('mouseleave','.stars_holder.editable_rating',function(){var width=0;if($(this).next('input[type="hidden"]').length>0){width=$(this).next('input[type="hidden"]').val()*10+'%';}
$(this).find('.full-stars').width(width);});});jQuery(function($){$(document).on('click','.more_details',function(event){event.preventDefault();var isClosed=$(this).children('span').hasClass('small_arrow_d');if(isClosed){$(this).children('.more_det_arrow').removeClass('small_arrow_d');$(this).children('.more_det_arrow').addClass('small_arrow_u');$(this).children('.more_det_text').text(tr('Hide Scores'));}
else{$(this).children('.more_det_arrow').removeClass('small_arrow_u');$(this).children('.more_det_arrow').addClass('small_arrow_d');$(this).children('.more_det_text').text(tr('Detailed Scores'));}
var $animatedDiv=$(this).closest('div').find('.user_review_rating_preview');$($animatedDiv).animate({height:'toggle',opacity:'toggle'},300,'linear',function(){});});$(document).on('mouseover','.score-result-wrapper',function(){showDetailedUserScore($(this));});$(document).on('mouseout','.score-result-wrapper',function(){hideDetailedUserScore($(this));});});